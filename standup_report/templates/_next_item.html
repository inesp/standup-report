{% set ISSUE_CLASS_NAME = 'Issue' %}
{% set PR_CLASS_NAME = 'PR' %}

{% set review_emoji = {'APPROVED': 'âœ…', 'CHANGES_REQUESTED': 'ğŸ”„', 'REVIEW_REQUIRED': 'ğŸ§'} %}
{% set issue_state_emoji = {'UNSTARTED': 'ğŸ¤', 'STARTED': 'ğŸŒ±', 'CANCELED': 'ğŸš«', 'COMPLETED': 'ğŸ‰'} %}

{# choose emoji #}
{% if item.__class__.__name__ == PR_CLASS_NAME %}
  {% if item.review_decision %}
    {% set emoji = review_emoji.get(item.review_decision, '') %}
  {% else %}
    {% set emoji = 'ğŸ”¨' %}
  {% endif %}
{% elif item.__class__.__name__ == ISSUE_CLASS_NAME %}
  {% set emoji = issue_state_emoji.get(item.state.name, '') %}
{% endif %}

<p class="mb-1">
  {{ emoji }}
{% if item.__class__.__name__ == PR_CLASS_NAME %}
  [{{ item.repo_slug }}]
  continue working on
  {% with link_url=item.url, link_text="PR #" ~ item.number ~ " " ~ item.title %}{% include '_link_with_slack.html' %}{% endwith %}
  <span class="text-gray-400 last-change-ago">- {{ item.last_change_ago }}</span>
  {% if item.review_decision == 'REVIEW_REQUIRED' %}
  <span class="text-yellow-600 text-sm">(needs review)</span>
  {% endif %}
{% elif item.__class__.__name__ == ISSUE_CLASS_NAME %}
  continue working on
  {% with link_url=item.url, link_text=item.long_title %}{% include '_link_with_slack.html' %}{% endwith %}
{% else %}
  Not implemented
{% endif %}
</p>
